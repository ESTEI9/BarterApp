<ion-header>
    <ion-toolbar color="primary">
        <ion-title *ngIf="!tradeId">
            <span *ngIf="tradeType === 'Gift'">Send a Gift</span>
            <span *ngIf="tradeType === 'Trade'">Start a Trade</span>
            <span *ngIf="tradeType === 'Invoice'">Send an Invoice</span>
        </ion-title>
        <ion-title *ngIf="tradeId">Add Valu</ion-title>
        <ion-buttons slot="end">
            <ion-button (click)="modalCtrl.dismiss()">
                <ion-icon name="close" slot="icon-only"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>
<ion-content>
    <ion-card>
        <ion-card-header color="secondary">
            <ion-card-title>Select Your Partner</ion-card-title>
        </ion-card-header>
        <ion-card-content no-padding>
            <app-searchable-dropdown
                *ngIf="vars.locations"
                [options]="searchLocations"
                debounce="300"
                color="light-alt"
                placeholder="Partner City"
                (updateOptions)="updateSearchLocations($event)"
                (selectValue)="setLocation($event)"
            ></app-searchable-dropdown>
            <div text-center padding *ngIf="location && !merchants"><ion-spinner color="highlight"></ion-spinner></div>
            <app-searchable-dropdown
                *ngIf="location && merchants"
                [options]="searchMerchants"
                debounce="300"
                color="light-alt"
                placeholder="Choose Partner"
                (updateOptions)="updateMerchants($event)"
                (selectValue)="setMerchant($event)"
            ></app-searchable-dropdown>
        </ion-card-content>
    </ion-card>
    <ion-card>
        <ion-card-header color="secondary">
            <ion-card-title>
                <span *ngIf="tradeType === 'Invoice'">Your Bill</span>
                <span *ngIf="tradeType !== 'Invoice'">Your {{tradeType}}</span>
            </ion-card-title>
        </ion-card-header>
        <ion-card-content no-padding>
            <ion-list *ngIf="tradeType === 'Invoice'" lines="none">
                <ion-item>
                    <ion-label position="stacked"><strong>Amount</strong></ion-label>
                    <ion-input [(ngModel)]="amount" type="tel" min="0" size="5"></ion-input>
                </ion-item>
            </ion-list>
            <app-wallet
                *ngIf="tradeType !== 'Invoice'"
                (update)="updateWallet($event)"
            ></app-wallet>
            <app-description
                [title]="title"
                [description]="description"
                (update)="updateDescription($event)"
            ></app-description>
        </ion-card-content>
    </ion-card>
</ion-content>
<ion-footer>
    <ion-toolbar color="primary">
        <ion-buttons>
            <ion-button *ngIf="!tradeId && tradeType === 'Trade'" (click)="createTrade()">
                Create Trade
            </ion-button>
            <ion-button *ngIf="!tradeId && tradeType === 'Invoice'" (click)="sendInvoice()">
                Send Invoice
            </ion-button>
            <ion-button *ngIf="!tradeId && tradeType === 'Gift'" (click)="sendGift()">
                Send Gift
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-footer>