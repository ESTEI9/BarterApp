<ion-toolbar color="clear" padding>
  <ion-buttons *ngIf="!completed" slot="start">
    <ion-button (click)="cancel()" color="danger">
      <ion-icon name="ios-arrow-round-back" slot="start"></ion-icon> Cancel
    </ion-button>
  </ion-buttons>
</ion-toolbar>
<ion-list *ngIf="!completed && !amountDue" lines="none">
  <ion-item>
    <ion-input class="code" text-center type="text" [(ngModel)]="precode" placeholder="Enter Code" [disabled]="code">
    </ion-input>
  </ion-item>
  <ion-item *ngIf="!code">
    <ion-button size="large" fill="outline" shape="round" color="secondary" (click)="lookup()" [disabled]="loading">
      <span *ngIf="!loading">
        <ion-icon name="search" slot="start"></ion-icon> Search
      </span>
      <ion-spinner *ngIf="loading" color="highlight"></ion-spinner>
    </ion-button>
  </ion-item>
  <ion-item *ngIf="code" class="details" text-center>
    <ion-label>
      <div class="amount">{{amount | currency}}</div>
      <ion-text class="dba" color="medium">{{merchant.dba}}</ion-text>
    </ion-label>
  </ion-item>
  <ion-item *ngIf="code" text-center>
    <ion-button size="large" shape="round" color="secondary" (click)="complete()" [disabled]="running">
      <span *ngIf="!running">
        <ion-icon name="checkmark" slot="start"></ion-icon> Complete
      </span>
      <ion-spinner *ngIf="running" color="hghlight"></ion-spinner>
    </ion-button>
  </ion-item>
</ion-list>
<ion-list *ngIf="completed" lines="none">
  <ion-item text-center>
    <ion-label class="completeMessage" color="secondary">
      <ion-icon size="large" name="checkmark-circle-outline"></ion-icon>
      Complete
    </ion-label>
  </ion-item>
  <ion-item text-center>
    <ion-button (click)="cancel()" size="large" fill="outline" color="secondary" shape="round">
      <ion-icon name="checkmark" slot="start"></ion-icon> Run Another
    </ion-button>
  </ion-item>
</ion-list>
<ion-list *ngIf="amountDue" lines="none">
  <ion-item text-center class="details">
    <ion-label class="amountDue" color="dark">
      <ion-text class="dba" color="medium">Amount Due</ion-text>
      <div class="amount">{{amount | currency}}</div>
    </ion-label>
  </ion-item>
  <ion-item>
    <ion-button size="large" shape="round" color="secondary" (click)="check()" [disabled]="running">
      <span *ngIf="!running">
        <ion-icon name="md-refresh" slot="start"></ion-icon> Check
      </span>
      <ion-spinner *ngIf="running" color="highlight"></ion-spinner>
    </ion-button>
  </ion-item>
</ion-list>